<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnetize | POPX</title>
  <meta name="description" content="Magnetize operator for applying magnetic forces (repulse, attract, spin) to instances based on magnet positions.">
  <link rel="icon" type="image/png" href="../../../../media/popx-logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>
  <script>
    // Prevent flash during page transitions
    if (performance.navigation.type === 1) {
      // Page was reloaded, no transition needed
      document.body.style.opacity = '1';
    } else {
      // Normal navigation, start hidden for fade-in
      document.body.classList.add('page-transitioning');
    }
  </script>
  <!-- Top Navigation Bar -->
  <div id="navbar-container"></div>

  <div class="page-layout">
    <!-- Mobile Menu Toggle -->
    <div id="mobile-menu-container"></div>

    <!-- Sidebar Navigation -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="main-content">
      <h1>Magnetize</h1>

      <!-- Summary Section -->
      <section id="summary">
        <h2>Summary</h2>
        <p>
          The <strong>Magnetize</strong> applies magnetic forces to each instance based on magnet positions.
          Each magnet can repulse, attract, or spin instances around them within a specified search radius, creating dynamic force-based effects.
        </p>

        <p>
          Magnet positions can be specified either through a second input connection or via the <strong>Magnets POP</strong> parameter.
          Supports three force modes: <strong>Repulse</strong> (push away), <strong>Attract</strong> (pull toward), and <strong>Spin</strong> (rotate around magnets).
        </p>

        <p>
          Effect intensity is controlled by the <strong>Search Radius</strong>, <strong>Effect Radius</strong>, and <strong>Force Strength</strong> parameters.
          Optional falloff-based modulation enables spatially varying magnetic effects.
        </p>

        <p>
          <strong>Multiple Magnet Fields:</strong> Magnets can be specified via the Magnets POP parameter or Input 1, where each point defines a separate magnet field - one point per magnet.
          The attributes of the magnet POP are named the same as parameter tokens in the Magnetize operator, and override the parameters for each magnet.
          Menus and toggles are represented as integers, starting at 0 for the first menu entry.
          You need only to create a Point POP with attributes named as the Magnetize parameters, and then add a point per magnet, and set their values.
          (An attribute <strong>radius</strong> will override the Effect Radius (Radius) parameter.)
          Alternately you can generate points procedurally with attributes that match the Magnetize parameter names.
          The workflow is the same as multiple strings defined in a specification DAT of the Geo Text COMP and the Text COMP.
        </p>
      </section>

      <!-- Parameters Section -->
      <section id="parameters">
        <h2>Parameters</h2>

        <!-- Magnetize Parameters -->
        <h3 class="page-heading" id="page-magnetize">Page: Magnetize</h3>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Group</span>
            <span class="param-name">Group</span>
            <span class="param-separator">–</span>
            <span class="param-description">If there are input groups, specifying a group name in this field will cause this POPX to act only upon the group specified.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Magnets POP</span>
            <span class="param-name">Magnetspop</span>
            <span class="param-separator">–</span>
            <span class="param-description">Reference to a POP containing points that define magnet positions and attributes when no second input is connected.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Display Magents</span>
            <span class="param-name">Displaymagents</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables visual display of magnet positions in the viewport.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Falloff</span>
            <span class="param-name">Dofalloff</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables falloff-based magnetic force intensity control.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Falloff Attribute</span>
            <span class="param-name">Falloffattr</span>
            <span class="param-separator">–</span>
            <span class="param-description">Specifies which attribute to use for falloff values that modulate magnetic force strength.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Search Radius</span>
            <span class="param-name">Searchradius</span>
            <span class="param-separator">–</span>
            <span class="param-description">Maximum distance from magnets within which instances are affected by magnetic forces.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Relaxation Factor</span>
            <span class="param-name">Relaxfactor</span>
            <span class="param-separator">–</span>
            <span class="param-description">Controls the smoothness and damping of magnetic force application over time.</span>
          </div>
        </div>

        <div class="param-group">
          <div class="param-group-header">
            <span class="param-label">Force Mode</span>
            <span class="param-name">Mode</span>
            <span class="param-separator">–</span>
            <span class="param-toggle"></span>
            <span class="param-separator">–</span>
            <span class="param-group-description">Determines the type of magnetic force: Repulse, Attract, or Spin. Can be overridden per-magnet using a mode point attribute.</span>
          </div>
          <div class="param-subparams">
            <div class="param-subparam">
              <span class="param-label">Repulse</span>
              <span class="param-name">repulse</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Attract</span>
              <span class="param-name">attract</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Spin</span>
              <span class="param-name">spin</span>
            </div>
          </div>
        </div>

        <div class="param-group">
          <div class="param-group-header">
            <span class="param-label">Position</span>
            <span class="param-name">Position</span>
            <span class="param-separator">–</span>
            <span class="param-toggle"></span>
            <span class="param-separator">–</span>
            <span class="param-group-description">Position of the magnet in 3D space. Can be overridden per-magnet using a P point attribute.</span>
          </div>
          <div class="param-subparams">
            <div class="param-subparam">
              <span class="param-label">Position</span>
              <span class="param-name">Positionx</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Position</span>
              <span class="param-name">Positiony</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Position</span>
              <span class="param-name">Positionz</span>
            </div>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Effect Radius</span>
            <span class="param-name">Radius</span>
            <span class="param-separator">–</span>
            <span class="param-description">Radius of influence for each magnet. Can be overridden per-magnet using a radius point attribute.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Force Strength</span>
            <span class="param-name">Strength</span>
            <span class="param-separator">–</span>
            <span class="param-description">Intensity of magnetic forces applied to instances. Can be overridden per-magnet using a strength point attribute.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Invert Spin Direction</span>
            <span class="param-name">Spindir</span>
            <span class="param-separator">–</span>
            <span class="param-description">Reverses the spin rotation direction. Can be controlled per-magnet using a spindir point attribute.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Affect Rotation</span>
            <span class="param-name">Affectrot</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables rotation changes based on magnetic force direction.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Aim Weight</span>
            <span class="param-name">Aimweight</span>
            <span class="param-separator">–</span>
            <span class="param-description">Controls how quickly instances rotate toward their direction of motion when Affect Rotation is enabled.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Initialize</span>
            <span class="param-name">Initializepulse</span>
            <span class="param-separator">–</span>
            <span class="param-description">Resets the simulation state to initial conditions.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Start</span>
            <span class="param-name">Startpulse</span>
            <span class="param-separator">–</span>
            <span class="param-description">Begins the simulation from the current state.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Play</span>
            <span class="param-name">Play</span>
            <span class="param-separator">–</span>
            <span class="param-description">Toggles simulation playback on or off.</span>
          </div>
        </div>

        <hr class="section-divider">

        <!-- Common Parameters -->
        <h3 class="page-heading" id="page-common">Page: Common</h3>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Bypass</span>
            <span class="param-name">Bypass</span>
            <span class="param-separator">–</span>
            <span class="param-description">Pass through the first input to the output unchanged.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Free Extra GPU Memory</span>
            <span class="param-name">Freeextragpumem</span>
            <span class="param-separator">–</span>
            <span class="param-description">Free memory that has accumulated when output memory has grown and shrunk.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Render Primitives</span>
            <span class="param-name">Renderprimitives</span>
            <span class="param-separator">–</span>
            <span class="param-description">Toggles rendering of POPX Geometry or shows it as point instances only.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">SRT / RST</span>
            <span class="param-name">Srtrst</span>
            <span class="param-separator">–</span>
            <span class="param-description">Sets the transform order when using POPX Geometry as built-in TouchDesigner instances.</span>
          </div>
        </div>
      </section>

      <!-- Inputs Section -->
      <section id="inputs">
        <h2>Inputs</h2>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Input 0</span>
            <span class="param-name">POP</span>
            <span class="param-separator">–</span>
            <span class="param-text">POPX/POP Geometry</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Input 1</span>
            <span class="param-name">POP</span>
            <span class="param-separator">–</span>
            <span class="param-text">Magnets</span>
          </div>
        </div>
      </section>

      <!-- Outputs Section -->
      <section id="outputs">
        <h2>Outputs</h2>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Output 0</span>
            <span class="param-name">POP</span>
            <span class="param-separator">–</span>
            <span class="param-text">POPX_out1</span>
          </div>
        </div>
      </section>

      <!-- Page Navigation -->
      <nav class="page-navigation">
        <a href="../color-modifier/" class="nav-button prev">Color Modifier</a>
        <a href="../move-along-curve/" class="nav-button next">Move Along Curve</a>
      </nav>
    </main>

    <!-- Table of Contents -->
    <aside class="toc">
      <h4>Contents</h4>
      <ul>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#parameters">Parameters</a>
          <ul>
            <li><a href="#page-magnetize">Page: Magnetize</a></li>
            <li><a href="#page-common">Page: Common</a></li>
          </ul>
        </li>
        <li><a href="#inputs">Inputs</a></li>
        <li><a href="#outputs">Outputs</a></li>
      </ul>
    </aside>
  </div>

  <div id="menu-overlay-container"></div>

  <script src="../../../../assets/js/component-loader.js"></script>
  <script src="../../../../assets/js/script.js"></script>
</body>
</html>
