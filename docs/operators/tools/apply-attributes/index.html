<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apply Attributes | POPX</title>
  <meta name="description" content="Applies template point attributes to POPX geometry with falloff-driven transformations using slerp blending for orientations.">
  <link rel="icon" type="image/png" href="../../../../media/popx-logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../../../assets/css/style.css">
</head>
<body>
  <script>
    // Prevent flash during page transitions
    if (performance.navigation.type === 1) {
      // Page was reloaded, no transition needed
      document.body.style.opacity = '1';
    } else {
      // Normal navigation, start hidden for fade-in
      document.body.classList.add('page-transitioning');
    }
  </script>
  <!-- Top Navigation Bar -->
  <div id="navbar-container"></div>

  <div class="page-layout">
    <!-- Mobile Menu Toggle -->
    <div id="mobile-menu-container"></div>

    <!-- Sidebar Navigation -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="main-content">
      <h1>Apply Attributes</h1>

      <!-- Summary Section -->
      <section id="summary">
        <h2>Summary</h2>
        <p>
          <strong>Apply Attributes</strong> is the core transformation engine of POPX, taking packed primitives and applying template point attributes to drive transformations.
          This operator is the fundamental building block for most POPX operations, handling the application of position, rotation, scale, and pivot data from template points to geometry instances.
        </p>

        <p>
          The operator uses the <code>f@mops_falloff</code> point attribute (or custom falloff attribute) to blend transformations smoothly.
          Orientations are blended using slerp (spherical linear interpolation) for natural rotation interpolation, while translations and scales are linearly interpolated.
          This ensures smooth, predictable motion even with complex falloff patterns.
        </p>

        <p>
          Apply Attributes supports both absolute and relative transformations through its Local Space option, and offers flexible rotation and scale modes.
          The operator can also copy arbitrary point attributes from template geometry to instances, and automatically manages orient and scale attributes for downstream operators.
          The Create popxId Attribute option ensures each instance has a unique identifier for tracking and reference.
        </p>
      </section>

      <!-- Parameters Section -->
      <section id="parameters">
        <h2>Parameters</h2>

        <!-- Transformation Page -->
        <h3 id="page-transformation" class="page-heading">Page: Transformation</h3>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Group</span>
            <span class="param-name">Group</span>
            <span class="param-separator">–</span>
            <span class="param-description">If there are input groups, specifying a group name in this field will cause this POPX to act only upon the group specified.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Falloff</span>
            <span class="param-name">Dofalloff</span>
            <span class="param-separator">–</span>
            <span class="param-description">When enabled, uses a falloff attribute to blend transformations smoothly.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Falloff Attribute</span>
            <span class="param-name">Falloffattribute</span>
            <span class="param-separator">–</span>
            <span class="param-description">Name of the falloff attribute to use for blending transformations (default: mops_falloff).</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Translate</span>
            <span class="param-name">Dotranslate</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables translation transformations from template points.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Rotate</span>
            <span class="param-name">Dorotate</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables rotation transformations from template points using slerp interpolation.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Scale</span>
            <span class="param-name">Doscale</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables scale transformations from template points.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Do Pivot</span>
            <span class="param-name">Dopivot</span>
            <span class="param-separator">–</span>
            <span class="param-description">Enables pivot point transformations from template points.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Local Space</span>
            <span class="param-name">Localspace</span>
            <span class="param-separator">–</span>
            <span class="param-description">When enabled, applies transformations relative to the instance's current transform.</span>
          </div>
        </div>

        <div class="param-group">
          <div class="param-group-header">
            <span class="param-label">Rotate Mode</span>
            <span class="param-name">Rotatemode</span>
            <span class="param-separator">–</span>
            <span class="param-toggle"></span>
            <span class="param-separator">–</span>
            <span class="param-group-description">Determines how rotations are applied to instances.</span>
          </div>
          <div class="param-subparams">
            <div class="param-subparam">
              <span class="param-label">Add</span>
              <span class="param-name">add</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Set</span>
              <span class="param-name">set</span>
            </div>
          </div>
        </div>

        <div class="param-group">
          <div class="param-group-header">
            <span class="param-label">Rotate Order</span>
            <span class="param-name">Rotateorder</span>
            <span class="param-separator">–</span>
            <span class="param-toggle"></span>
            <span class="param-separator">–</span>
            <span class="param-group-description">Order in which rotation axes are applied.</span>
          </div>
          <div class="param-subparams">
            <div class="param-subparam">
              <span class="param-label">XYZ</span>
              <span class="param-name">xyz</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">XZY</span>
              <span class="param-name">xzy</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">YXZ</span>
              <span class="param-name">yxz</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">YZX</span>
              <span class="param-name">yzx</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">ZXY</span>
              <span class="param-name">zxy</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">ZYX</span>
              <span class="param-name">zyx</span>
            </div>
          </div>
        </div>

        <div class="param-group">
          <div class="param-group-header">
            <span class="param-label">Scale Mode</span>
            <span class="param-name">Scalemode</span>
            <span class="param-separator">–</span>
            <span class="param-toggle"></span>
            <span class="param-separator">–</span>
            <span class="param-group-description">Determines how scale values are applied to instances.</span>
          </div>
          <div class="param-subparams">
            <div class="param-subparam">
              <span class="param-label">Multiply</span>
              <span class="param-name">multiply</span>
            </div>
            <div class="param-subparam">
              <span class="param-label">Replace</span>
              <span class="param-name">replace</span>
            </div>
          </div>
        </div>

        <hr class="section-divider">

        <!-- Attributes Page -->
        <h3 id="page-attributes" class="page-heading">Page: Attributes</h3>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Copy Attributes</span>
            <span class="param-name">Copyattributes</span>
            <span class="param-separator">–</span>
            <span class="param-description">When enabled, copies point attributes from template geometry to instances.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Attributes To Copy</span>
            <span class="param-name">Attributestocopy</span>
            <span class="param-separator">–</span>
            <span class="param-description">Space-separated list of attribute names to copy from template points.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Create popxId Attribute if Missing</span>
            <span class="param-name">Createpopxidattributeifmissing</span>
            <span class="param-separator">–</span>
            <span class="param-description">Automatically creates unique popxId attributes for instances that don't have one.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Output Orient Attribute</span>
            <span class="param-name">Outputorientattribute</span>
            <span class="param-separator">–</span>
            <span class="param-description">Outputs orientation data as an attribute for downstream operators.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Output Scale Attribute</span>
            <span class="param-name">Outputscaleattribute</span>
            <span class="param-separator">–</span>
            <span class="param-description">Outputs scale data as an attribute for downstream operators.</span>
          </div>
        </div>

        <hr class="section-divider">

        <!-- Common Page -->
        <h3 id="page-common" class="page-heading">Page: Common</h3>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Bypass</span>
            <span class="param-name">Bypass</span>
            <span class="param-separator">–</span>
            <span class="param-description">Pass through the first input to the output unchanged.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Free Extra GPU Memory</span>
            <span class="param-name">Freeextragpumem</span>
            <span class="param-separator">–</span>
            <span class="param-description">Free memory that has accumulated when output memory has grown and shrunk.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">Render Primitives</span>
            <span class="param-name">Renderprimitives</span>
            <span class="param-separator">–</span>
            <span class="param-description">Toggles rendering of POPX Geometry or shows it as point instances only.</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header">
            <span class="param-label">SRT / RST</span>
            <span class="param-name">Srtrst</span>
            <span class="param-separator">–</span>
            <span class="param-description">Sets the transform order when using POPX Geometry as built-in TouchDesigner instances.</span>
          </div>
        </div>
      </section>

      <!-- Inputs Section -->
      <section id="inputs">
        <h2>Inputs</h2>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Input 0</span>
            <span class="param-separator">–</span>
            <span class="param-name">POP</span>
            <span class="param-separator">–</span>
            <span class="param-text">POPX Geometry to transform</span>
          </div>
        </div>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Input 1</span>
            <span class="param-separator">–</span>
            <span class="param-name">Template</span>
            <span class="param-separator">–</span>
            <span class="param-text">Template points containing transformation attributes</span>
          </div>
        </div>
      </section>

      <!-- Outputs Section -->
      <section id="outputs">
        <h2>Outputs</h2>

        <div class="parameter-item">
          <div class="param-header param-header-inline">
            <span class="param-label">Output 0</span>
            <span class="param-separator">–</span>
            <span class="param-name">POP</span>
            <span class="param-separator">–</span>
            <span class="param-text">Transformed POPX Geometry with applied attributes</span>
          </div>
        </div>
      </section>

      <!-- Page Navigation -->
      <nav class="page-navigation">
        <a href="../../modifiers/transform-modifier/" class="nav-button prev">Transform Modifier</a>
        <a href="../delete/" class="nav-button next">Delete</a>
      </nav>
    </main>

    <!-- Table of Contents -->
    <aside class="toc">
      <h4>Contents</h4>
      <ul>
        <li><a href="#summary">Summary</a></li>
        <li>
          <a href="#parameters">Parameters</a>
          <ul>
            <li><a href="#page-transformation">Page: Transformation</a></li>
            <li><a href="#page-attributes">Page: Attributes</a></li>
            <li><a href="#page-common">Page: Common</a></li>
          </ul>
        </li>
        <li><a href="#inputs">Inputs</a></li>
        <li><a href="#outputs">Outputs</a></li>
      </ul>
    </aside>
  </div>

  <div id="menu-overlay-container"></div>

  <script src="../../../../assets/js/component-loader.js"></script>
  <script src="../../../../assets/js/script.js"></script>
</body>
</html>
